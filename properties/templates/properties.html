{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
<section class="rh_banner rh_banner__image"
         style="background-repeat: no-repeat;background-position: center top;background-image: url('{% static 'img/banner.jpg' %}' ); background-size: cover; ">

    <div class="rh_banner__cover"></div>
    <!-- /.rh_banner__cover -->

    <div class="rh_banner__wrap">

        <h2 class="rh_banner__title">
            List Layout </h2>
        <!-- /.rh_banner__title -->

        <div class="rh_banner__controls">

            <div class="rh_view_type">
                <a class="grid " href="indexb92a.html?view=grid">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
                        <path d="M1497,1029h4a2.006,2.006,0,0,1,2,2v4a2.006,2.006,0,0,1-2,2h-4a2.006,2.006,0,0,1-2-2v-4A2.006,2.006,0,0,1,1497,1029Zm0,10h4a2.006,2.006,0,0,1,2,2v4a2.006,2.006,0,0,1-2,2h-4a2.006,2.006,0,0,1-2-2v-4A2.006,2.006,0,0,1,1497,1039Zm10-10h4a2.006,2.006,0,0,1,2,2v4a2.006,2.006,0,0,1-2,2h-4a2.006,2.006,0,0,1-2-2v-4A2.006,2.006,0,0,1,1507,1029Zm0,10h4a2.006,2.006,0,0,1,2,2v4a2.006,2.006,0,0,1-2,2h-4a2.006,2.006,0,0,1-2-2v-4A2.006,2.006,0,0,1,1507,1039Z"
                              transform="translate(-1495 -1029)"/>
                    </svg>
                </a>
                <a class="list active" href="indexd1fd.html?view=list">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
                        <path id="menu"
                              d="M1539.01,1029a1.958,1.958,0,0,1,1.99,1.99,2.067,2.067,0,0,1-1.99,2.01A2,2,0,1,1,1539.01,1029Zm5.99,0h8a2,2,0,0,1,0,4h-8A2,2,0,0,1,1545,1029Zm-5.99,7a1.958,1.958,0,0,1,1.99,1.99,2.067,2.067,0,0,1-1.99,2.01A2,2,0,1,1,1539.01,1036Zm5.99,0h8a2.006,2.006,0,0,1,2,2h0a2.006,2.006,0,0,1-2,2h-8a2.006,2.006,0,0,1-2-2h0A2.006,2.006,0,0,1,1545,1036Zm-5.99,7a1.958,1.958,0,0,1,1.99,1.99,2.067,2.067,0,0,1-1.99,2.01A2,2,0,1,1,1539.01,1043Zm5.99,0h8a2.006,2.006,0,0,1,2,2h0a2.006,2.006,0,0,1-2,2h-8a2.006,2.006,0,0,1-2-2h0A2.006,2.006,0,0,1,1545,1043Z"
                              transform="translate(-1537 -1029)"/>
                    </svg>
                </a>
            </div>
            <!-- /.rh_view_type -->
        </div>
        <!-- /.rh_banner__controls -->

    </div>
    <!-- /.rh_banner__wrap -->

</section>
<!-- /.rh_banner -->
{% include 'searchSidebar.html' %}


<!-- Content -->
<div class="rh_map rh_map__search ">
    <script type="text/javascript">
	    function initializePropertiesMap(properties=[]) {

	        /* Properties Array */
	        // var properties = [
	        // 	{"title":"Villa in Coral Gables",
	        // 	"price":"$825,000 ",
	        // 	"lat":"25.637835760899435",
	        // 	"lng":"-80.30060203710934",
	        // 	"thumb":"http:\/\/realhomes-modern.inspirythemes.biz\/wp-content\/uploads\/2015\/07\/property-02-exterior-244x163.jpg",
	        // 	"url":"http:\/\/realhomes-modern.inspirythemes.biz\/property\/villa-in-coral-gables\/",
	        // 	"icon":"http:\/\/realhomes-modern.inspirythemes.biz\/wp-content\/themes\/realhomes\/assets\/modern\/images\/map\/single-family-home-map-icon.png",
	        // 	"retinaIcon":"http:\/\/realhomes-modern.inspirythemes.biz\/wp-content\/themes\/realhomes\/assets\/modern\/images\/map\/single-family-home-map-icon@2x.png"
	        		
	        // 	},
	        // 	{"title":"Shop at Southwest 186th Street",
	        // 	"price":"$3,200 Monthly",
	        // 	"lat":"25.596675",
	        // 	"lng":"-80.35622799999999",
	        // 	"thumb":"http:\/\/realhomes-modern.inspirythemes.biz\/wp-content\/uploads\/2015\/07\/property-11-exterior-244x163.jpg",
	        // 	"url":"http:\/\/realhomes-modern.inspirythemes.biz\/property\/shop-at-southwest-186th-street\/",
	        // 	"icon":"http:\/\/realhomes-modern.inspirythemes.biz\/wp-content\/themes\/realhomes\/assets\/modern\/images\/map\/single-family-home-map-icon.png",
	        // 	"retinaIcon":"http:\/\/realhomes-modern.inspirythemes.biz\/wp-content\/themes\/realhomes\/assets\/modern\/images\/map\/single-family-home-map-icon@2x.png"
	        		
	        // 	}]
	        /* Map Center Location - From Theme Options */
	        var location_center = new google.maps.LatLng(properties[0].lat,properties[0].lng);

	        var mapOptions = {
	            zoom: 12,
	            maxZoom: 16,
	            scrollwheel: false,
				scaleControl:false,
				streetViewControl:true,
				streetViewControlOptions: {
										position: google.maps.ControlPosition.RIGHT_TOP,
									},
				fullscreenControl:true,
				fullscreenControlOptions: {
					position: google.maps.ControlPosition.TOP_LEFT
				},
				zoomControl:true,
			    zoomControlOptions: {
				    					position: google.maps.ControlPosition.LEFT_BOTTOM
				    			    },
				mapTypeControl:true,
				mapTypeControlOptions: {
										position: google.maps.ControlPosition.RIGHT_BOTTOM,
										style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
				},
	            styles : [
	            	{
		                "featureType": "landscape",
		                "stylers": [
		                    {
		                        "hue": "#FFBB00"
		                    },
		                    {
		                        "saturation": 43.400000000000006
		                    },
		                    {
		                        "lightness": 37.599999999999994
		                    },
		                    {
		                        "gamma": 1
		                    }
		                ]
		            },
	                {
	                    "featureType": "road.highway",
	                    "stylers": [
	                        {
	                            "hue": "#FFC200"
	                        },
	                        {
	                            "saturation": -61.8
	                        },
	                        {
	                            "lightness": 45.599999999999994
	                        },
	                        {
	                            "gamma": 1
	                        }
	                    ]
	                },
	                {
	                    "featureType": "road.arterial",
	                    "stylers": [
	                        {
	                            "hue": "#FF0300"
	                        },
	                        {
	                            "saturation": -100
	                        },
	                        {
	                            "lightness": 51.19999999999999
	                        },
	                        {
	                            "gamma": 1
	                        }
	                    ]
	                },
	                {
	                    "featureType": "road.local",
	                    "stylers": [
	                        {
	                            "hue": "#FF0300"
	                        },
	                        {
	                            "saturation": -100
	                        },
	                        {
	                            "lightness": 52
	                        },
	                        {
	                            "gamma": 1
	                        }
	                    ]
	                },
	                {
	                    "featureType": "water",
	                    "stylers": [
	                        {
	                            "hue": "#0078FF"
	                        },
	                        {
	                            "saturation": -13.200000000000003
	                        },
	                        {
	                            "lightness": 2.4000000000000057
	                        },
	                        {
	                            "gamma": 1
	                        }
	                    ]
	                },
	                {
	                    "featureType": "poi",
	                    "stylers": [
	                        {
	                            "hue": "#00FF6A"
	                        },
	                        {
	                            "saturation": -1.0989010989011234
	                        },
	                        {
	                            "lightness": 11.200000000000017
	                        },
	                        {
	                            "gamma": 1
	                        }
	                    ]
	                }
	            ]
	        };

	        var map = new google.maps.Map(document.getElementById("listing-map"), mapOptions);

	        var oms = new OverlappingMarkerSpiderfier( map, {
	            markersWontMove: true,
	            markersWontHide: true,
	            keepSpiderfied: true,
	            circleSpiralSwitchover: Infinity,
	            nearbyDistance: 50
	        } );

	        var bounds = new google.maps.LatLngBounds();

	        /* Loop to generate marker and infowindow based on properties array */
	        var markers = new Array();

	        for (var i=0; i < properties.length; i++) {

	            var url = properties[i].icon;
	            var size = new google.maps.Size( 42, 57 );
	            if( window.devicePixelRatio > 1.5 ) {
	                if ( properties[i].retinaIcon ) {
	                    url = properties[i].retinaIcon;
	                    size = new google.maps.Size( 83, 113 );
	                }
	            }

	            var image = {
	                url: url,
	                size: size,
	                scaledSize: new google.maps.Size( 42, 57 ),
	                origin: new google.maps.Point( 0, 0 ),
	                anchor: new google.maps.Point( 21, 56 )
	            };

	            markers[i] = new google.maps.Marker({
	                position: new google.maps.LatLng(properties[i].lat,properties[i].lng),
	                map: map,
	                // icon: properties[i].icon,
	                icon: image,
	                title: properties[i].title,
	                animation: google.maps.Animation.DROP,
	                visible: true
	            });

	            bounds.extend(markers[i].getPosition());

	            var boxText = document.createElement("div");
	            boxText.className = 'map-info-window';

	            var innerHTML = "";
	            if ( properties[i].thumb ) {
	                innerHTML += '<a class="thumb-link" href="' + properties[i].url + '">' +
	                            '<img class="prop-thumb" src="' + properties[i].thumb + '" alt="' + properties[i].title + '"/>' +
	                            '</a>';
	            }

	            innerHTML += '<h5 class="prop-title"><a class="title-link" href="' + properties[i].url + '">' + properties[i].title + '</a></h5>';

	            if ( properties[i].price ) {
	                innerHTML += '<p><span class="price">' + properties[i].price + '</span></p>';
	            }

	            innerHTML += '<div class="arrow-down"></div>';

	            boxText.innerHTML = innerHTML;


	            var myOptions = {
	                content: boxText,
	                disableAutoPan: true,
	                maxWidth: 0,
	                alignBottom: true,
	                pixelOffset: new google.maps.Size( -122, -48 ),
	                zIndex: null,
	                closeBoxMargin: "0 0 -16px -16px",
	                closeBoxURL: "http://realhomes-modern.inspirythemes.biz/wp-content/themes/realhomes/assets/modern/images/map/close.png",
	                infoBoxClearance: new google.maps.Size( 1, 1 ),
	                isHidden: false,
	                pane: "floatPane",
	                enableEventPropagation: false
	            };

	            var ib = new InfoBox( myOptions );
	            attachInfoBoxToMarker( map, markers[i], ib );

	            oms.addMarker( markers[i] );
	        }

	        map.fitBounds(bounds);

	        /* Marker Clusters */
	        var markerClustererOptions = {
	            ignoreHidden: true,
	            maxZoom: 14,
	            styles: [{
	                textColor: '#ffffff',
	                url: "http://realhomes-modern.inspirythemes.biz/wp-content/themes/realhomes/assets/modern/images/map/cluster-icon.png",
	                height: 48,
	                width: 48
	            }]
	        };

	        var markerClusterer = new MarkerClusterer( map, markers, markerClustererOptions );

	        /* Close previously opened infoBox */
	        var openedWindows = new Array();
	        var closeOpenedWindows = function() {
	            while ( 0 < openedWindows.length ) {
	                var windowToClose = openedWindows.pop();
	                windowToClose.close();
	            }
	        };

	        function attachInfoBoxToMarker( map, marker, infoBox ) {
	            google.maps.event.addListener( marker, 'click', function() {
	                closeOpenedWindows();
	                var scale = Math.pow( 2, map.getZoom() );
	                var offsety = ( (100/scale) || 0 );
	                var projection = map.getProjection();
	                var markerPosition = marker.getPosition();
	                var markerScreenPosition = projection.fromLatLngToPoint( markerPosition );
	                var pointHalfScreenAbove = new google.maps.Point( markerScreenPosition.x, markerScreenPosition.y - offsety );
	                var aboveMarkerLatLng = projection.fromPointToLatLng( pointHalfScreenAbove );
	                map.setCenter( aboveMarkerLatLng );
	                infoBox.open( map, marker );
	                openedWindows.push(infoBox);
	            } );
	        }
	    }

	    // google.maps.event.addDomListener( window, 'load', initializePropertiesMap );


    </script>

    <div id="map-head">
        <div id="listing-map"></div>
    </div>
    <!-- End Map Head -->
</div>
<section class="rh_section rh_section--flex rh_wrap--padding rh_wrap--topPadding">

    <div class="rh_page rh_page__listing_page rh_page__main">

        <div class="rh_page__head">
			 {% include 'sortby.html' %}
        </div>
        <!-- /.rh_page__head -->


        <section class="rh_compare rh_compare__section ">

            <h4 class="title">Compare Properties</h4>

            <div class="rh_compare__carousel">


            </div>

            <a href="../compare-properties/index.html" class="rh_compare__submit rh_btn rh_btn--primary">Compare</a>
            <!-- .compare-submit -->

        </section>
        <!-- .rh_compare_section -->
        <div id="ajax-load-card">

        </div>
    </div>
    <!-- /.rh_page rh_page__main -->

    <div class="rh_page rh_page__sidebar">

        <!-- Sidebar -->
        {% include 'aside.html' %}
        <!-- End Sidebar -->
    </div>
    <!-- /.rh_page rh_page__sidebar -->

</section>
<!-- /.rh_section rh_wrap rh_wrap--padding -->

{% endblock content %}